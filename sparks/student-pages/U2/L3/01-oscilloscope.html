<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<script type="text/javascript" src="/bjc-r/llab/loader.js"></script>
		<script type="text/javascript" src="/bjc-r/utilities/gifffer.min.js"></script>
		<script type="text/javascript">window.onload = function() {Gifffer();}</script>
		<link rel="stylesheet" type="text/css" href="/bjc-r/css/bjc-gifffer.css">
		<title>Unit 2 Lab 3: Make Some Noise, Activity 1</title>
	</head>

	<body>
		<h2>Visualizing Sound Data</h2>
		<div class="todo">
			<p><a href="#hint-needs" data-toggle="collapse" title="">Needs</a> for <a href="https://snap.berkeley.edu/versions/dev/snap.html#present:Username=mfries&ProjectName=BJCMS%20-%20Sound%20Visualizer" target="_blank">SOUND VISUALIZER</a></p>
			<div id="hint-needs" class="collapse"><p>
				<ul>
					<li>+, - (in beat repeat if not before)</li>
					<li>stop (2.1.1?)</li>
					<li>when key pressed (with <code>stop</code> on 2.1.1?)</li>
					<li>forever (2.1.1)</li>
					<li>set variable (2.1.3?)</li>
					<li>go to (could be taught in field of flowers)</li>
					<li>clear (could be taught in field of flowers)</li>
					<li>pen down (could be taught in field of flowers)</li>
					<li>if else (chat bot?)</li>
					<li>not (chat bot)</li>
					<li>microphone (with visualizer)</li>
					<li>script variables (with visualizer?)</li>
				</ul>
			</p></div>
		</div>
		
		<div class="learn">In this activity, you will explore the sound data from your computer's microphone and learn about oscilloscopes.</div>
	
		<div class="todo">NEEDS EDITS. pull out all the frequency stuff for the spectrum analyzer and check that I don't mix this stuff up again anywhere</div>

		
		<p>
			Snap<em>!</em> can access your computer's microphone, so you can create a virtual <em>oscilloscope</em> that displays the <em>frequencies</em> picked up by the microphone.<br />
			<img class="indent" data-gifffer="/bjc-r/sparks/img/U2/lab03/sound-visualizer.gif" alt="animation of an oscilloscope in Snap! that looks like a rapidly changing, horizontal wavey line" title="animation of an oscilloscope in Snap! that looks like a rapidly changing, horizontal wavey line" /><br />
			 
		</p>
		<div class="vocabFullWidth">
			<ul>
				<li>An <strong>oscilloscope</strong> is an instrument that graphs a signal's intensity over time.</li>
				<li>The <strong>frequency</strong> of a sound is its pitch. High frequencies sound high, and low frequencies sound low.</li>
			</ul>
		</div>
		<div class="todo">Have PG and BH review this sound stuff. Maybe have Jens, BH, and perhaps even Della review the whole lab.</div>
		<div class="endnote">
			<p><a href="#hint-sound-frequency" data-toggle="collapse" title="Want to know more about sound and frequency?">Want to know more about sound and frequency?</a></p>
			<div id="hint-sound-frequency" class="collapse">
				<p>Sound is created by pressure waves through a material (like air or water). When you hear music, an instrument or speaker (think of a vibrating guitar string, a vibrating drum head, or a vibrating speaker) creates waves of pressure that travel through the air to your eardrum, which transmits the signals through your nerves to your brain. Have you ever heard a sound that was so loud you could feel it? Those were pressure waves that were so big you could sense them with more than just your eardrum!</p>
				<p>Frequency is how often a repeating sound pressure wave repeats. Music (when its more than just precussion) is about playing different frequencies in a way that other people enjoy hearing.</p>
			</div>
		</div>
		
		<div class="forYouToDo">
			<ol>
				<li>Create a new project called <div class="newProject"><span class="text">"Sparks-Sound-Visualizer"</span><img src="/bjc-r/img/icons/new-project-called.png" alt="Create a new project called Sparks-Sound-Visualizer" title="Create a new project called Sparks-Sound-Visualizer" />, and save it to your account.</div></li>
				<div class="endnote">
					If you haven't used the microphone yet in Snap<em>!</em> on this computer, you might get a message like this (but maybe a little different) asking you to allow snap.berkeley.edu to access your microphone. You'll need to allow this to build the oscilloscope.<br />
					<img class="indent" src="/bjc-r/sparks/img/U2/lab03/allow-microphone.png" alt="image of a popup message saying 'snap.berkeley.edu wants to use your microphone' with two buttons 'Block' and 'Allow'" title="image of a popup message saying 'snap.berkeley.edu wants to use your microphone' with two buttons 'Block' and 'Allow'" />
				</div>
				<li>set up microphone</li>
				<li>
					Explore the <code>microphone</code> block. Drag it out of the "Sensing" palette, and click it several times for each of the following inputs:
					<img class="imageRight" src="/bjc-r/sparks/img/U2/lab03/microphone-dropdown.png" alt="picture of microphone block with drop-down menu open showing seven options: volume, note, frequency, samples, sample rate, spectrum, resolution" title="picture of microphone block with drop-down menu open showing seven options: volume, note, frequency, samples, sample rate, spectrum, resolution" />
					<div class="sidenote">If you get zeros as output for these inputs, try a few more times. It  can take a moment for Snap<em>!</em> to tell your browser to tell your computer to listen to the microphone. If it still still doesn't work, check your microphone.</div>
					<ol style="list-style-type: lower-alpha;">
						<li><img class="" src="/bjc-r/sparks/img/U2/lab03/microphone(volume).png" alt="microphone (volume)" title="microphone (volume)" /> reports the current volume value detected by the microphone (Try clicking it while you are making a quiet sound, a loud sound, and no sound.)</li>
						<li><img class="" src="/bjc-r/sparks/img/U2/lab03/microphone(samples).png" alt="microphone (samples)" title="microphone (samples)" /> reports a list of current microphone volume values sampled across a small period of time </li>
						<li><img class="" src="/bjc-r/sparks/img/U2/lab03/microphone(resolution).png" alt="microphone (resolution)" title="microphone (resolution)" /> reports the number of values in a <code>microphone (samples)</code> list</li>
					</ol>
				</li>
				<li>
					<div class="sidenote">You learned about the <code>for each</code> block on <a href="/bjc-r/sparks/student-pages/U2/L1/05-beat-repeat.html?topic=sparks%2F2-sequencing-iteration.topic&course=sparks.html" title="Unit 2 Lab 1 Activity 5: Beat Repeat">Unit 2 Lab 1 Activity 5: Beat Repeat</a>.</div>
					<img class="imageRight" src="/bjc-r/img/icons/talk-with-your-partner.png" alt="Talk with Your Partner" title="Talk with Your Partner" />
					These two instructions are the core of the oscilloscope code. Discuss how they work. (They will not work on their own.)<br />
					<img class="indent" src="/bjc-r/sparks/img/U2/lab03/oscilloscope-core-1.png" alt="set (time step) to (width of (Stage) / microphone (resolution))" title="set (time step) to (width of (Stage) / microphone (resolution))" />
					<img class="indent" src="/bjc-r/sparks/img/U2/lab03/oscilloscope-core-2.png" alt="for each (sample) in (microphone (samples)) {
	go to x: (x position + time step) y: (sample × 150)
}" title="for each (sample) in (microphone (samples)) {
	go to x: (x position + time step) y: (sample × 150)
}" />
				</li>
		<div class="todo">Maybe have them build the inputs to the <code>goto</code> block. Also have them think about the timestep stuff</div>
		<div class="todo">preview the difference between Time Domain and Frequency Domain</div>
			</ol>
		</div>
		
		<div class="todo">TG (or maybe on page if we have themselves): OPTIONAL: To see the dimensions of the stage, click the "Stage" icon in the lower right corner of the Snap! window, select "Backgrounds..." from the Snap! file menu, choose the "XY Grid" and click "Import," and then return to this code, by clicking the "Sprite" icon in the lower right corner and selecting the "Scripts" tab at the top of this scripting area. (Instructions like this will be in the Google doc for students; this is just a preview.) :)</div>
		
		<div class="learn">In this activity, you will create an <em>oscilloscope</em> to visualize the sounds detected by your computer's microphone.</div>

	
	
	
	
	
	<div class="todo"><h1>Page break</h1></div>
	
	
		<h3>Oscilloscope</h3>
		<div class="learn">In this activity, you will create an <em>oscilloscope</em> to visualize the sounds detected by your computer's microphone.</div>


		<p>
			Below is the complete code for oscilloscope, and here is what it does:
			<ul>
				<li>This code creates a <var>time step</var> variable and sets its value so that microphone samples will fit across width of the Snap<em>!</em> stage by dividing the stage width by the microphone resolution. </li>
				<li>It moves the sprite to the left center of the Snap<em>!</em> stage, clears the stage, and puts the pen down. This sets up the sprite for to draw one set of <code>microphone (samples)</code> data.</li>
				<li>Then to draw each sample volume value, it moves the sprite to the left (by adding <var>time step</var> value to the <em>x</em>) position) and to the volume value (by setting the <em>y</em> position to the sample volume value scaled up 150 times). </li>
				<li>The <code>forever</code> block makes this code keep drawing the current microphone sample list, and the <code>warp</code> block makes Snap<em>!</em> draw fast.</li>
			</ul>
			<div class="todo">TG: students can also download the image of the oscilloscope code and drag it into snap. There is Snap<em>!</em> code embedded in the image as XML.</div>
			<div class="todo">REDO THIS AND OTHER CODE images with updated code version (v2)</div>
			<img class="indent" src="/bjc-r/sparks/img/U2/lab03/oscilloscope-code.png" alt="script variables (time step)
set (time step) to (width of (Stage) / microphone (resolution))
forever {
	warp {
		go to x: (-240) y: (0)
		clear
		pen down
		for each (sample) in (microphone (samples)) {
			go to x: (x position + time step) y: (sample × 150)
		}
	}
}" title="script variables (time step)
set (time step) to (width of (Stage) / microphone (resolution))
forever {
	warp {
		go to x: (-240) y: (0)
		clear
		pen down
		for each (sample) in (microphone (samples)) {
			go to x: (x position + time step) y: (sample × 150)
		}
	}
}" />
		</p>
	
		<div class="endnote">
			<p><a href="#hint-oscilloscope-detail" data-toggle="collapse" title="One more time: What's going with the oscilloscope code?">One more time: What's going with the oscilloscope code?</a></p>
			<div id="hint-oscilloscope-detail" class="collapse">
				<p>First, a script variable <var>time step</var> is created and set to the width of the stage divided by the number of values in the microphone sample set (so that the sprite moves horizontally across the whole stage as it goes through the list of samples).</p>
				<p>
					Then the following two things happen forever and fast (the <code>wrap</code> block is like a time-warp):
					<ul>
						<li>The sprite is moved to the right-hand center of the stage (-240, 0). The stage is cleared from all previous pen drawings. The sprite's pen is put down.</li>
						<li>For each sample in the set of microphone samples, the sprite moves to the next <em>x</em> position horizontally and moves to a scaled up version of the current frequency sample vertically.</li>
					</ul>
				</p>
				<p>Since the code resets the state of the sprite and the stage and then draws all the samples across the stage again and again forever, and this creates an oscilloscope!</p>
			</div>
		</div>
	
		<div class="forYouToDo">
			<ol start="4">
				<li>Build this in Snap<em>!</em></li>
				<li>Talk, sing, and make noise! If your computer's microphone is detecting sound and your Snap<em>!</em> code is working, you should see the frequencies displayed on the Snap<em>!</em> stage.</li>
				<li>Troubleshoot any problems with your code.</li>
				<div class="sidenote">You learned about adding comments in <a href="http://localhost/bjc-r/sparks/student-pages/U1/L6/01-texting-time.html?topic=sparks%2F1-functions-data.topic&course=middle-school.html" title="Unit 1 Lab 6 Activity 1: Texting Time" target="_blank">Unit 1 Lab 6 Activity 1: Texting Time</a>.</div>
				<li>Once your oscilloscope is working, add Snap<em>!</em>comments to your code so you remember how it works.</li>
				<li><img class="inline" src="/bjc-r/img/icons/save-now.png" alt="Now Is a Good Time to Save" title="Now Is a Good Time to Save" /></li>
			</ol>
		</div>
	
		<div class="ifTime">
			<ol start="9">
				<li>
					<img class="imageRight" src="/bjc-r/img/icons/predict.png" alt="Predict What Will Happen" title="Predict What Will Happen" />
					Without using Snap<em>!</em>, try to predict what will happen to the oscilloscope if you change the number in the <img class="nopadtb" src="/bjc-r/sparks/img/U2/lab03/samplex150.png" alt="sample × 150" title="sample × 150" /> input to the <code>go to</code> block? 
				</li>
				<li>
					<img class="imageRight" src="/bjc-r/img/icons/talk-with-your-partner.png" alt="Talk with Your Partner" title="Talk with Your Partner" />
					Why do you think that will happen?
				</li>
				<li>Try it out in Snap<em>!</em>. Try a larger value (like 1000) and a smaller value (like 25). If your prediction wasn't correct, can you explain why what you see happens?</li>
			</ol>
		</div>
		
		<div class="learn">In this activity, you coded <em>oscilloscope</em> that displays the intensity of the sound over time.</div>


	</body>
</html>